# .github/workflows/deploy.yml

name: Build and Deploy to GitHub Pages

on:
  push:
    branches:
      - main # –ò–ª–∏ –≤–∞—à–∞ –æ—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ç–∫–∞ (master, –∏—Ç–¥)

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: write # –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è gh-pages action –¥–ª—è –ø—É—à–∞ –≤ –≤–µ—Ç–∫—É gh-pages

    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v3

      - name: Set up Node.js ‚öôÔ∏è
        uses: actions/setup-node@v3
        with:
          node-version: '18' # –£–∫–∞–∂–∏—Ç–µ –≤–∞—à—É –∏–ª–∏ LTS –≤–µ—Ä—Å–∏—é Node.js

      - name: Install dependencies üì¶
        run: npm ci # –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞, —á–µ–º npm install

      - name: Build project üèóÔ∏è
        run: npm run build
        env:
          # –ï—Å–ª–∏ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∏ vite.config.js base –Ω–µ –º–æ–∂–µ—Ç –µ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å,
          # –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å VITE_BASE_URL –∑–¥–µ—Å—å, –Ω–æ –æ–±—ã—á–Ω–æ base –≤ vite.config.js –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.
          # VITE_BASE_URL: /<–ò–ú–Ø_–í–ê–®–ï–ì–û_–†–ï–ü–û–ó–ò–¢–û–†–ò–Ø>/
          CI: false # –ò–Ω–æ–≥–¥–∞ –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏ –∫–∞–∫ –æ—à–∏–±–∫–∞–º–∏

      - name: Deploy to GitHub Pages üöÄ
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./dist # –ü–∞–ø–∫–∞, –∫–æ—Ç–æ—Ä—É—é Vite —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–∏ —Å–±–æ—Ä–∫–µ
          # publish_branch: gh-pages # –í–µ—Ç–∫–∞, –∫—É–¥–∞ –±—É–¥—É—Ç –≤—ã–≥—Ä—É–∂–∞—Ç—å—Å—è —Ñ–∞–π–ª—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
          # user_name: 'github-actions[bot]' # –ò–º—è –∫–æ–º–º–∏—Ç–µ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
          # user_email: 'github-actions[bot]@users.noreply.github.com' # Email –∫–æ–º–º–∏—Ç–µ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
          # cname: yourcustomdomain.com # –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π –¥–æ–º–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
